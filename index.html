<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rezerwaty Przyrody w Polsce</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            height: 100%;
            background-color: white;
            border-right: 1px solid #ccc;
            padding: 10px;
            overflow-y: auto;
        }
        .sidebar h2 {
            font-size: 18px;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>Rezerwaty Przyrody w Polsce</h2>
        <p>Krótka informacja na temat rezerwatów przyrody w Polsce i ich rodzajów.</p>
        <h3>Rodzaje rezerwatów:</h3>
        <ul>
            <li><input type="checkbox" id="wodny" checked> Wodny</li>
            <li><input type="checkbox" id="torfowiskowy" checked> Torfowiskowy</li>
            <li><input type="checkbox" id="stepowy" checked> Stepowy</li>
            <li><input type="checkbox" id="slonoroslowy" checked> Słonoroślowy (halofilny)</li>
            <li><input type="checkbox" id="przyrody_nieozywionej" checked> Przyrody nieożywionej</li>
            <li><input type="checkbox" id="nie_okreslono" checked> Nie określono w akcie prawnym</li>
            <li><input type="checkbox" id="lesny" checked> Leśny</li>
            <li><input type="checkbox" id="krajobrazowy" checked> Krajobrazowy</li>
            <li><input type="checkbox" id="florystyczny" checked> Florystyczny</li>
            <li><input type="checkbox" id="faunistyczny" checked> Faunistyczny</li>
            <li><input type="checkbox" id="null" checked> NULL</li>
        </ul>
    </div>
    <div id="map"></div>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Initialize map
        var map = L.map('map').setView([52.237049, 21.017532], 6);

        // Define base layers
        var terrainLayer = L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
            maxZoom: 17,
            attribution: 'Map data: &copy; OpenStreetMap contributors, SRTM | Map style: &copy; OpenTopoMap (CC-BY-SA)'
        }).addTo(map);

        var osmLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap contributors'
        });

        var baseLayers = {
            "Ukształtowanie powierzchni": terrainLayer,
            "OpenStreetMap": osmLayer
        };

        // Add layer control
        L.control.layers(baseLayers).addTo(map);

        // Load GeoJSON data
        $.getJSON('https://github.com/BruhBruva/BruhBruva.github.io/blob/b985cbcce725e85bfd524aa6de8bd9348d723ae1/Rezerwaty_rodzaje.geojson', function(data) {
            var rezerwatyLayers = {};

            function onEachFeature(feature, layer) {
                if (feature.properties && feature.properties.Nazwa) {
                    layer.bindPopup(feature.properties.Nazwa);
                }
            }

            var rodzaje = ["wodny", "torfowiskowy", "stepowy", "slonoroslowy", "przyrody_nieozywionej", "nie_okreslono", "lesny", "krajobrazowy", "florystyczny", "faunistyczny", "null"];

            rodzaje.forEach(function(rodzaj) {
                rezerwatyLayers[rodzaj] = L.geoJSON(data, {
                    filter: function(feature) {
                        return feature.properties.Rodzaj === rodzaj;
                    },
                    onEachFeature: onEachFeature
                }).addTo(map);
            });

            // Checkbox event listeners
            rodzaje.forEach(function(rodzaj) {
                $('#' + rodzaj).change(function() {
                    if (this.checked) {
                        rezerwatyLayers[rodzaj].addTo(map);
                    } else {
                        map.removeLayer(rezerwatyLayers[rodzaj]);
                    }
                });
            });
        });

        // Limit map to Poland's boundaries
        var bounds = L.latLngBounds([49.0, 14.0], [55.0, 24.0]);
        map.setMaxBounds(bounds);
        map.on('drag', function() {
            map.panInsideBounds(bounds, { animate: false });
        });
    </script>
</body>
</html>
